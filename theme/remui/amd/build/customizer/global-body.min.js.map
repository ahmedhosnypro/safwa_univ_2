{"version":3,"file":"global-body.min.js","sources":["../../src/customizer/global-body.js"],"sourcesContent":["/* eslint-disable no-console */\n/*eslint-disable no-unused-vars*/\n// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n/**\n * Theme customizer global-body js\n * @copyright (c) 2023 WisdmLabs (https://wisdmlabs.com/) <support@wisdmlabs.com>\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @author    Yogesh Shirsath\n */\n\nimport $ from 'jquery';\nimport Utils from 'theme_remui/customizer/utils';\n\nvar SELECTOR = {\n    BASE: 'global-typography-body',\n    FONTFAMILY: '[name=\"global-typography-body-fontfamily\"]',\n    FONTSIZE: 'global-typography-body-fontsize',\n    FONTWEIGHT: '[name=\"global-typography-body-fontweight\"]',\n    LINEHEIGHT: '[name=\"global-typography-body-lineheight\"]',\n    TEXTTRANSFORM: '[name=\"global-typography-body-text-transform\"]',\n    LINK: '[name=\"enablebodysettingslinking\"]',\n    SMALLPARAFONTFAMILY: '[name=\"global-typography-smallpara-fontfamily\"]',\n    SMALLPARAFONTSIZE: 'global-typography-smallpara-fontsize',\n    SMALLPARALINEHEIGHT: '[name=\"global-typography-smallpara-lineheight\"]',\n    SMALLPARATEXTTRANSFORM: '[name=\"global-typography-smallpara-text-transform\"]',\n    SMALLINFOFONTFAMILY: '[name=\"global-typography-smallinfo-fontfamily\"]',\n    SMALLINFOFONTSIZE: 'global-typography-smallinfo-fontsize',\n    SMALLINFOLINEHEIGHT: '[name=\"global-typography-smallinfo-lineheight\"]',\n    SMALLINFOTEXTTRANSFORM: '[name=\"global-typography-smallinfo-text-transform\"]',\n    LAYOUT: '[name=\"pagewidth\"]'\n};\n\n// Check whether settings are linked.\nlet isLinked = () => $(SELECTOR.LINK).is(':checked');\n\n/**\n * Get global font name.\n * @return {String} Font name\n */\nfunction getGlobalFont() {\n    let fontFamily = $(SELECTOR.FONTFAMILY).val();\n    if (fontFamily.toLocaleLowerCase() == 'standard') {\n        fontFamily = 'Inter';\n    }\n    if (fontFamily.toLocaleLowerCase() == 'inherit') {\n        // eslint-disable-next-line no-undef\n        if (remuiFontSelect == 1) {\n            return 'Inter';\n        }\n        // eslint-disable-next-line no-undef\n        if (remuiFontName == '') {\n            return 'Inter';\n        }\n        // eslint-disable-next-line no-undef\n        return remuiFontName;\n    }\n    return fontFamily;\n}\n\n/**\n * Load font.\n * @param {string} font Font name\n */\nfunction handleFont(font) {\n    if (font.toLocaleLowerCase() == 'inherit') {\n        return;\n    }\n    Utils.loadFont(font);\n}\n\n/**\n * Get body settings values.\n * @returns {object} Settings\n */\nfunction getBodySettings() {\n    return {\n        'fontFamily': getGlobalFont(),\n        'fontSize': {\n            'default': $(`[name='${SELECTOR.FONTSIZE}']`).val(),\n            'tablet': $(`[name='${SELECTOR.FONTSIZE}-tablet']`).val(),\n            'mobile': $(`[name='${SELECTOR.FONTSIZE}-mobile']`).val()\n        },\n        'fontWeight': $(SELECTOR.FONTWEIGHT).val(),\n        'textTransform': $(SELECTOR.TEXTTRANSFORM).val(),\n        'lineHeight': $(SELECTOR.LINEHEIGHT).val()\n    }\n}\n\n/**\n * Handle site body content.\n */\nfunction handleBody() {\n    let {\n        fontFamily,\n        fontSize,\n        fontWeight,\n        textTransform,\n        lineHeight\n    } = getBodySettings();\n\n    if (isLinked()) {\n        updateLinkedSettings();\n    }\n    let content = `\n        body {\n            font-size: ${fontSize.default}px !important;\n            text-transform: ${textTransform} !important;\n            font-family: \"${fontFamily}\",sans-serif !important;\n            line-height: ${lineHeight} !important;\n            font-weight: ${fontWeight} !important;\n        }\n    `;\n\n    // Tablet.\n    if (fontSize.tablet != '') {\n        content += `\\n\n            @media screen and (min-width: ${Utils.deviceWidth.sm + 1}px) and (max-width: ${Utils.deviceWidth.md}px) {\n                body {\n                    font-size: ${fontSize.tablet}px !important;\n                }\n            }\n        `;\n    }\n\n    // Mobile.\n    if (fontSize.mobile != '') {\n        content += `\\n\n            @media screen and (max-width: ${Utils.deviceWidth.sm}px) {\n                body {\n                    font-size: ${fontSize.mobile}px !important;\n                }\n            }\n        `;\n    }\n    Utils.putStyle('global-body', content);\n    handleFont(fontFamily);\n}\n\n/**\n * Handle small info text content.\n */\nfunction handleSmallParagraph() {\n    let fontFamily, fontSize, textTransform, lineHeight;\n    fontFamily = $(SELECTOR.SMALLPARAFONTFAMILY).val();\n    if (fontFamily.toLowerCase() == 'standard') {\n        fontFamily = 'Inter';\n    }\n    fontSize = {\n        'default': $(`[name='${SELECTOR.SMALLPARAFONTSIZE}']`).val(),\n        'tablet': $(`[name='${SELECTOR.SMALLPARAFONTSIZE}-tablet']`).val(),\n        'mobile': $(`[name='${SELECTOR.SMALLPARAFONTSIZE}-mobile']`).val()\n    };\n    textTransform = $(SELECTOR.SMALLPARATEXTTRANSFORM).val();\n    lineHeight = $(SELECTOR.SMALLPARALINEHEIGHT).val();\n    handleFont(fontFamily);\n    let content = `\n        .para-regular-2,\n        .para-semibold-2,\n        .para-underline-2 {\n            font-family: ${fontFamily} !important;\n            font-size: ${fontSize.default}px !important;\n            text-transform: ${textTransform} !important;\n            line-height: ${lineHeight} !important;\n        }\n    `;\n\n    // Tablet.\n    if (fontSize.tablet != '') {\n        content += `\\n\n            @media screen and (min-width: ${Utils.deviceWidth.sm + 1}px) and (max-width: ${Utils.deviceWidth.md}px) {\n                .para-regular-2,\n                .para-semibold-2,\n                .para-underline-2 {\n                    font-size: ${fontSize.tablet}px !important;\n                }\n            }\n        `;\n    }\n\n    // Mobile.\n    if (fontSize.mobile != '') {\n        content += `\\n\n            @media screen and (max-width: ${Utils.deviceWidth.sm}px) {\n                .para-regular-2,\n                .para-semibold-2,\n                .para-underline-2 {\n                    font-size: ${fontSize.mobile}px !important;\n                }\n            }\n        `;\n    }\n    Utils.putStyle('global-small-paragraph', content);\n}\n\n/**\n * Handle small paragraph content.\n */\nfunction handleSmallInfoText() {\n    let fontFamily, fontSize, textTransform, lineHeight;\n    fontFamily = $(SELECTOR.SMALLINFOFONTFAMILY).val();\n    if (fontFamily.toLowerCase() == 'standard') {\n        fontFamily = 'Inter';\n    }\n    fontSize = {\n        'default': $(`[name='${SELECTOR.SMALLINFOFONTSIZE}']`).val(),\n        'tablet': $(`[name='${SELECTOR.SMALLINFOFONTSIZE}-tablet']`).val(),\n        'mobile': $(`[name='${SELECTOR.SMALLINFOFONTSIZE}-mobile']`).val()\n    };\n    textTransform = $(SELECTOR.SMALLINFOTEXTTRANSFORM).val();\n    lineHeight = $(SELECTOR.SMALLINFOLINEHEIGHT).val();\n    handleFont(fontFamily);\n\n    let content = `\n        .small-info-regular,\n        .small-info-semibold,\n        #page-header #page-navbar nav ol.breadcrumb .breadcrumb-item,\n        .edw-msg-panel-badge,\n        .message-app .view-conversation .content-message-container [data-region=\"day-messages-container\"] [data-region=\"text-container\"] p {\n            font-family: ${fontFamily} !important;\n            font-size: ${fontSize.default}px !important;\n            text-transform: ${textTransform} !important;\n            line-height: ${lineHeight} !important;\n        }\n    `;\n\n    // Tablet.\n    if (fontSize.tablet != '') {\n        content += `\\n\n            @media screen and (min-width: ${Utils.deviceWidth.sm + 1}px) and (max-width: ${Utils.deviceWidth.md}px) {\n                .small-info-regular,\n                .small-info-semibold {\n                    font-size: ${fontSize.tablet}px !important;\n                }\n            }\n        `;\n    }\n\n    // Mobile.\n    if (fontSize.mobile != '') {\n        content += `\\n\n            @media screen and (max-width: ${Utils.deviceWidth.sm}px) {\n                .small-info-regular,\n                .small-info-semibold {\n                    font-size: ${fontSize.mobile}px !important;\n                }\n            }\n        `;\n    }\n    Utils.putStyle('global-small-info', content);\n}\n\n/**\n * Update linked settings.\n */\nfunction updateLinkedSettings() {\n    // Small paragraph.\n    $(`[name=\"${SELECTOR.SMALLPARAFONTSIZE}\"]`).val($(`[name=\"${SELECTOR.FONTSIZE}\"]`).val() - 2);\n    $(`[name=\"${SELECTOR.SMALLPARAFONTSIZE}-tablet\"]`).val($(`[name=\"${SELECTOR.FONTSIZE}-tablet\"]`).val() - 2);\n    $(`[name=\"${SELECTOR.SMALLPARAFONTSIZE}-mobile\"]`).val($(`[name=\"${SELECTOR.FONTSIZE}-mobile\"]`).val() - 2);\n    $(SELECTOR.SMALLPARAFONTFAMILY).val('inherit');\n    $(SELECTOR.SMALLPARALINEHEIGHT).val($(SELECTOR.LINEHEIGHT).val());\n    $(SELECTOR.SMALLPARATEXTTRANSFORM).val('inherit');\n    handleSmallParagraph();\n\n    // Small info text.\n    $(`[name=\"${SELECTOR.SMALLINFOFONTSIZE}\"]`).val($(`[name=\"${SELECTOR.FONTSIZE}\"]`).val() - 4);\n    $(`[name=\"${SELECTOR.SMALLINFOFONTSIZE}-tablet\"]`).val($(`[name=\"${SELECTOR.FONTSIZE}-tablet\"]`).val() - 4);\n    $(`[name=\"${SELECTOR.SMALLINFOFONTSIZE}-mobile\"]`).val($(`[name=\"${SELECTOR.FONTSIZE}-mobile\"]`).val() - 4);\n    $(SELECTOR.SMALLINFOFONTFAMILY).val('inherit');\n    $(SELECTOR.SMALLINFOLINEHEIGHT).val($(SELECTOR.LINEHEIGHT).val());\n    $(SELECTOR.SMALLINFOTEXTTRANSFORM).val('inherit');\n    handleSmallInfoText();\n}\n\n/**\n * Handling settings linking.\n */\nfunction handleLinking() {\n    $(`\n        [name*=\"${SELECTOR.SMALLPARAFONTSIZE}\"],\n        [name*=\"${SELECTOR.SMALLINFOFONTSIZE}\"],\n        ${SELECTOR.SMALLPARAFONTFAMILY},\n        ${SELECTOR.SMALLPARALINEHEIGHT},\n        ${SELECTOR.SMALLPARATEXTTRANSFORM},\n        ${SELECTOR.SMALLINFOFONTFAMILY},\n        ${SELECTOR.SMALLINFOLINEHEIGHT},\n        ${SELECTOR.SMALLINFOTEXTTRANSFORM}\n    `).closest('.form-group').toggleClass('linked-setting', isLinked())\n    .attr('title', isLinked() ? M.util.get_string('bodysettingslinked', 'theme_remui') : '');\n    if (isLinked()) {\n        updateLinkedSettings();\n    }\n}\n\n/**\n * Handle page layout.\n */\nfunction handleLayout() {\n    let body = $(Utils.getDocument()).find('body');\n    if (body.is('#page-site-index')) {\n        body.removeClass('limitedwidth');\n        return;\n    }\n    $(body).toggleClass('limitedwidth', $(SELECTOR.LAYOUT).val() == 'default');\n}\n\n/**\n * Apply settings.\n */\nfunction apply() {\n    handleBody();\n    handleSmallParagraph();\n    handleSmallInfoText();\n    handleLayout();\n}\n\n/**\n * Initialize events.\n */\nfunction init() {\n    $(`\n        [name='${SELECTOR.FONTSIZE}'],\n        [name='${SELECTOR.FONTSIZE}-tablet'],\n        [name='${SELECTOR.FONTSIZE}-mobile']\n    `).on('input', handleBody);\n\n    $(`\n        ${SELECTOR.FONTWEIGHT},\n        ${SELECTOR.TEXTTRANSFORM},\n        ${SELECTOR.LINEHEIGHT},\n        ${SELECTOR.FONTFAMILY}\n    `).on('input', handleBody);\n\n    // Handle small paragraph settings.\n    $(`\n        [name='${SELECTOR.SMALLPARAFONTSIZE}'],\n        [name='${SELECTOR.SMALLPARAFONTSIZE}-tablet'],\n        [name='${SELECTOR.SMALLPARAFONTSIZE}-mobile'],\n        ${SELECTOR.SMALLPARATEXTTRANSFORM},\n        ${SELECTOR.SMALLPARALINEHEIGHT},\n        ${SELECTOR.SMALLPARAFONTFAMILY}\n    `).on('input', handleSmallParagraph);\n\n    // Handle small info text settings.\n    $(`\n        [name='${SELECTOR.SMALLINFOFONTSIZE}'],\n        [name='${SELECTOR.SMALLINFOFONTSIZE}-tablet'],\n        [name='${SELECTOR.SMALLINFOFONTSIZE}-mobile'],\n        ${SELECTOR.SMALLINFOTEXTTRANSFORM},\n        ${SELECTOR.SMALLINFOLINEHEIGHT},\n        ${SELECTOR.SMALLINFOFONTFAMILY}\n    `).on('input', handleSmallInfoText);\n\n    // Handle link setting switch.\n    $(SELECTOR.LINK).on('input', handleLinking);\n\n    // Handle layout.\n    $(SELECTOR.LAYOUT).on('change', handleLayout);\n\n    handleLinking();\n}\n\nexport default {\n    init,\n    apply\n};\n"],"names":["SELECTOR","isLinked","is","getGlobalFont","fontFamily","val","toLocaleLowerCase","remuiFontSelect","remuiFontName","handleFont","font","loadFont","handleBody","fontSize","fontWeight","textTransform","lineHeight","updateLinkedSettings","content","default","tablet","Utils","deviceWidth","sm","md","mobile","putStyle","handleSmallParagraph","toLowerCase","handleSmallInfoText","handleLinking","closest","toggleClass","attr","M","util","get_string","handleLayout","body","getDocument","find","removeClass","init","on","apply"],"mappings":"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"}