{"version":3,"file":"profile.min.js","sources":["../src/profile.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @module     theme_remui/profile\n * @copyright (c) 2023 WisdmLabs (https://wisdmlabs.com/)\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n\"use strict\";\ndefine([\n    'jquery',\n    'core/ajax',\n    'core/notification'\n], function($, Ajax, Notification) {\n    $('#editprofile .form-horizontal #btn-save-changes').click(function() {\n        var SELECTORS = {\n            ERROR: 'div#error-message',\n            DANGER: 'alert-danger',\n            SUCCESS: 'alert-success'\n        };\n        $(SELECTORS.ERROR).show();\n        $(SELECTORS.ERROR).removeClass(SELECTORS.DANGER).addClass(SELECTORS.SUCCESS);\n        $(SELECTORS.ERROR).find('p').html(\"Saving...\");\n\n        var fname = $('#first_name').val();\n        var lname = $('#surname').val();\n        var description = $.trim($('#description').val());\n        var city = $.trim($('#city').val());\n        var country = $('#editprofile .form-horizontal #country option:selected').val();\n\n        if (fname === '') {\n            $(SELECTORS.ERROR).show();\n            $(SELECTORS.ERROR).removeClass(SELECTORS.SUCCESS).addClass(SELECTORS.DANGER);\n            $(SELECTORS.ERROR).find('p').html(M.util.get_string('enterfirstname', 'theme_remui'));\n            $('#first_name').focus();\n            return false;\n        }\n        if (lname === '') {\n            $(SELECTORS.ERROR).show();\n            $(SELECTORS.ERROR).removeClass(SELECTORS.SUCCESS).addClass(SELECTORS.DANGER);\n            $(SELECTORS.ERROR).find('p').html(M.util.get_string('enterlastname', 'theme_remui'));\n            $('#surname').focus();\n            return false;\n        }\n\n        var promise = Ajax.call([{\n            methodname: 'theme_remui_save_user_profile_settings',\n            args: {\n                fname,\n                lname,\n                description,\n                city,\n                country\n            }\n        }])[0];\n        promise.done(function() {\n                $(SELECTORS.ERROR).show();\n                $(SELECTORS.ERROR).removeClass(SELECTORS.DANGER).addClass(SELECTORS.SUCCESS);\n                $(SELECTORS.ERROR).find('p').css('margin', '0').html(M.util.get_string('detailssavedsuccessfully', 'theme_remui'));\n                $('.profile-user').text(fname + \" \" + lname);\n                $('.usermenu a span.usertext').text(fname + \" \" + lname);\n                $('#user-description').text(description);\n            })\n            .fail(function(ex) {\n                $(SELECTORS.ERROR).removeClass(SELECTORS.SUCCESS).addClass(SELECTORS.DANGER);\n                $(SELECTORS.ERROR).find('p')\n                    .css('margin', '0')\n                    .html(ex.errorcode + ' : ' + ex.error + ', ' + M.util.get_string('actioncouldnotbeperformed', 'theme_remui'));\n                Notification.exception(ex);\n            });\n\n        return false;\n    });\n\n});\n"],"names":["define","$","Ajax","Notification","click","SELECTORS","show","removeClass","addClass","find","html","fname","val","lname","description","trim","city","country","M","util","get_string","focus","call","methodname","args","done","css","text","fail","ex","errorcode","error","exception"],"mappings":";;;;;AAsBAA,6BAAO,CACH,SACA,YACA,sBACD,SAASC,EAAGC,KAAMC,cACjBF,EAAE,mDAAmDG,OAAM,eACnDC,gBACO,oBADPA,iBAEQ,eAFRA,kBAGS,gBAEbJ,EAAEI,iBAAiBC,OACnBL,EAAEI,iBAAiBE,YAAYF,kBAAkBG,SAASH,mBAC1DJ,EAAEI,iBAAiBI,KAAK,KAAKC,KAAK,iBAE9BC,MAAQV,EAAE,eAAeW,MACzBC,MAAQZ,EAAE,YAAYW,MACtBE,YAAcb,EAAEc,KAAKd,EAAE,gBAAgBW,OACvCI,KAAOf,EAAEc,KAAKd,EAAE,SAASW,OACzBK,QAAUhB,EAAE,0DAA0DW,YAE5D,KAAVD,OACAV,EAAEI,iBAAiBC,OACnBL,EAAEI,iBAAiBE,YAAYF,mBAAmBG,SAASH,kBAC3DJ,EAAEI,iBAAiBI,KAAK,KAAKC,KAAKQ,EAAEC,KAAKC,WAAW,iBAAkB,gBACtEnB,EAAE,eAAeoB,SACV,GAEG,KAAVR,OACAZ,EAAEI,iBAAiBC,OACnBL,EAAEI,iBAAiBE,YAAYF,mBAAmBG,SAASH,kBAC3DJ,EAAEI,iBAAiBI,KAAK,KAAKC,KAAKQ,EAAEC,KAAKC,WAAW,gBAAiB,gBACrEnB,EAAE,YAAYoB,SACP,IAGGnB,KAAKoB,KAAK,CAAC,CACrBC,WAAY,yCACZC,KAAM,CACFb,YACAE,YACAC,wBACAE,UACAC,oBAEJ,GACIQ,MAAK,WACLxB,EAAEI,iBAAiBC,OACnBL,EAAEI,iBAAiBE,YAAYF,kBAAkBG,SAASH,mBAC1DJ,EAAEI,iBAAiBI,KAAK,KAAKiB,IAAI,SAAU,KAAKhB,KAAKQ,EAAEC,KAAKC,WAAW,2BAA4B,gBACnGnB,EAAE,iBAAiB0B,KAAKhB,MAAQ,IAAME,OACtCZ,EAAE,6BAA6B0B,KAAKhB,MAAQ,IAAME,OAClDZ,EAAE,qBAAqB0B,KAAKb,gBAE/Bc,MAAK,SAASC,IACX5B,EAAEI,iBAAiBE,YAAYF,mBAAmBG,SAASH,kBAC3DJ,EAAEI,iBAAiBI,KAAK,KACnBiB,IAAI,SAAU,KACdhB,KAAKmB,GAAGC,UAAY,MAAQD,GAAGE,MAAQ,KAAOb,EAAEC,KAAKC,WAAW,4BAA6B,gBAClGjB,aAAa6B,UAAUH,QAGxB,KAGd"}